{% extends 'base.html.twig' %}

{% block title %}Mon Séjour{% endblock %}

{% block body %}
<div class="container">
    <div class="row">
        <div class="col s12">
            <a href="{{ path('app_front_office_dossier_show', {'id': sejour.dossierMedicale.id}) }}" 
               class="btn-floating btn-large waves-effect waves-light blue">
                <i class="material-icons">arrow_back</i>
            </a>
            <h3>Détails du Séjour</h3>
        </div>
    </div>

    <div class="row">
        <div class="col s12 m6">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Informations du Séjour</span>
                    <p>
                        <strong>Type de séjour:</strong> {{ sejour.typeSejour }}<br>
                        <strong>Date d'entrée:</strong> {{ sejour.dateEntree|date('d/m/Y H:i') }}<br>
                        <strong>Date de sortie:</strong> {{ sejour.dateSortie|date('d/m/Y H:i') }}
                    </p>
                </div>
            </div>
        </div>

        <div class="col s12 m6">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Informations de Paiement</span>
                    <p>
                        <strong>Frais de séjour:</strong> {{ sejour.fraisSejour }} €<br>
                        <strong>Frais supplémentaires:</strong> {{ sejour.prixExtras ?: '0' }} €<br>
                        <strong>Total:</strong> {{ sejour.fraisSejour + (sejour.prixExtras ?: 0) }} €<br>
                        <strong>Moyen de paiement:</strong> {{ sejour.moyenPaiement }}<br>
                        <strong>Statut du paiement:</strong> 
                        <span class="chip {{ sejour.statutPaiement == 'Payé' ? 'green white-text' : 'orange white-text' }}">
                            {{ sejour.statutPaiement }}
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col s12">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Dossier Médical Associé</span>
                    <p>
                        <strong>Numéro de dossier:</strong> #{{ sejour.dossierMedicale.id }}<br>
                        <strong>Patient:</strong> {{ sejour.dossierMedicale.patient.nomUser }} {{ sejour.dossierMedicale.patient.prenomUser }}<br>
                        <strong>Médecin traitant:</strong> Dr. {{ sejour.dossierMedicale.medecin.nomUser }} {{ sejour.dossierMedicale.medecin.prenomUser }}
                    </p>
                    <div class="card-action">
                        <a href="{{ path('app_front_office_dossier_show', {'id': sejour.dossierMedicale.id}) }}" class="blue-text">
                            Voir le dossier médical complet
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 